{
  "id": "0005",
  "title": "Training utilities: HTMLâ†’text, fetch+extract, style summary generator",
  "epic": "Epic 2. API Routes",
  "task": {
    "description": "Add pure server-side utilities used by training endpoints: extractPlainTextFromHtml for basic tag stripping, fetchAndExtractText(url) to fetch HTML and return {httpStatus,text}, and generateStyleSummary(trainingText) that always returns a non-empty string length >= 50 for non-empty input.",
    "acceptance_criteria": [
      "F1-AC4: extractPlainTextFromHtml(\"<p>a</p>\") returns exactly \"a\" (no angle-bracket tags remain).",
      "F1-AC4: generateStyleSummary(\"hello\") returns a string with length >= 50 and is not whitespace-only.",
      "F1-AC6: fetchAndExtractText(url) is implemented as a library module with no imports from Next.js route handlers (only standard fetch/libs).",
      "F2-AC3: Utilities can be used by later routes to truncate to MAX_TRAINING_TEXT_LEN without throwing."
    ]
  },
  "covers": [
    "F1-AC4",
    "F2-AC3"
  ],
  "files": [
    "src/lib/training/extractPlainText.ts",
    "src/lib/training/fetchAndExtractText.ts",
    "src/lib/training/generateStyleSummary.ts"
  ],
  "definition_of_done": [
    "Utilities export named functions with explicit return types.",
    "`pnpm build` succeeds."
  ],
  "depends_on": [
    "0002"
  ],
  "db_schema": "",
  "api_contract": "",
  "dependencies": [],
  "ui_requirements": ""
}